# 面试者背景




:::warning
**10年，深圳证券公司，系统架构组架构师，监控平台、电商平台，秒杀**

**监控平台有多少应用接入了？整体多少台机器****？****2-4****台，**

**监控平台建设介绍下？数据采集层、运行时监控、****skywalking****监控、数据展示层、告警治理层、消息推送层。**

**业务监控是如何实现的？****websocket****，业务其他方案了解过吗？**

**机器上面的指标是如何采集的，****Prometheus exporter ****原理知道吗？**

**推送平台、通过滑动窗口限流、****lua****脚本实现滑动窗口的大致内容是咋样的？**

**链路追踪的主要实现原理？****traceId****、****Span****都包含哪些信息？****Span****的作用是啥？耗时记录**

**你觉你做的这个监控系统，在业内处于什么样的水平？**

**你平常是如何做架构设计的？有哪些设计觉得自己做的比较好，有哪些如果重新设计可以做的更好的？**

**电商项目的整体秒杀方案介绍一下？前端：限流、置灰。**** Token****防重，****Redis****库存预扣减，****MQ****，异步扣减。为哈异步扣数据库库存？热点行更新会有啥问题？行锁、具体的瓶颈在哪？**

**Redis****和数据库分别如何防止超卖？****redis lua****脚本、乐观锁？**

**还有其他方案可以解决数据库热点扣减吗？库存拆分**

**分库分表做过吗？****2000****万，多少库多少表？为啥？一个库不行吗？分表字段？买家****id****，为啥不用订单号。订单号如何分表？基因法**

**分库分表后会带来哪些问题？不带分表键跨表查询问题、二次分表问题、数据倾斜问题、**

**卖家查询怎么解决？双写一张卖家表。卖家表倾斜怎么办？**

**除了分库分表，有其他方案解决数据量大的问题吗？冷热分离、**

**分库分表后需要定时任务扫表，怎么办？****xxl-job**

**线上问题定位和排查有做过哪些？****OOM****。线程池，内存泄漏，**

**你在设计架构的时候，除了技术方面还会考虑其他因素吗？机器资源、**

:::

# 题目解析




:::color4
**推送平台、通过滑动窗口限流、lua脚本实现滑动窗口的大致内容是咋样的？**

:::



[[✅什么是滑动窗口限流？]]



[[✅如何基于Redis实现滑动窗口限流？]]





:::color4
**链路追踪的主要实现原理？traceId、Span都包含哪些信息？Span的作用是啥？耗时记录**

:::



[[✅如何实现应用中的链路追踪？]]



:::color4
**你平常是如何做架构设计的？有哪些设计觉得自己做的比较好，有哪些如果重新设计可以做的更好的？**

:::



[[✅什么样的架构才算是好的架构？]]



:::color4
**电商项目的整体秒杀方案介绍一下？前端：限流、置灰。**** Token****防重，****Redis****库存预扣减，****MQ****，异步扣减。为哈异步扣数据库库存？热点行更新会有啥问题？行锁、具体的瓶颈在哪？**

**Redis****和数据库分别如何防止超卖？****redis lua****脚本、乐观锁？**

**还有其他方案可以解决数据库热点扣减吗？库存拆分**

:::



[[✅让你设计一个秒杀系统，你会考虑哪些问题？]]



[[✅库存扣减如何避免超卖和少卖？]]



[[✅MySQL怎么做热点数据高效更新？]]



:::color4
**分库分表做过吗？****2000****万，多少库多少表？为啥？一个库不行吗？分表字段？买家****id****，为啥不用订单号。订单号如何分表？基因法**

**分库分表后会带来哪些问题？不带分表键跨表查询问题、二次分表问题、数据倾斜问题、**

**卖家查询怎么解决？双写一张卖家表。卖家表倾斜怎么办？**

**除了分库分表，有其他方案解决数据量大的问题吗？冷热分离、**

**分库分表后需要定时任务扫表，怎么办？xxl-job**

:::



[[✅什么是分库？分表？分库分表？]]



[[✅分表字段如何选择？]]



[[✅分库分表后会带来哪些问题？]]



[[✅分库分表的取模算法策略如何避免数据倾斜]]



[[✅如果单表数据量大，只能考虑分库分表吗？]]



[[✅基于XXL-JOB的分片实现分库分表后的扫表]]





:::color4
**你在设计架构的时候，除了技术方面还会考虑其他因素吗？机器资源、**

:::



[[✅架构设计中最重要的三个要素是什么？]]



[[✅如何做技术选型？]]



