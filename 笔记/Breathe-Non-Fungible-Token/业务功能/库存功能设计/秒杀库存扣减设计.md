杀场景下的库存扣减，其实是一个典型的热点商品的库存扣减问题，主要就是解决数据库热点行更新存在大量的锁竞争，导致操作慢，影响数据库性能的问题。

那么主要的实现的思路就是借助Redis来在数据库之前先进行一次流量拦截和过滤。

**<font style="color:rgb(230, 36, 18);">在我们的项目中，目前有3套秒杀方案，都是经过实践检验证明行之有效，并且很多公司在用的方案</font>**，比如<u>携程门票的热点扣减方案</u>：

![[a2280a11-30ea-42a8-a427-9e4674961b15.png]]



这个方案，和我们项目中用到的基于MQ的方案基本上是一样的，而且我们做的比他的方案还要完整，具体到Redis中我们也记录了明细流水，以及取消订单是我们用了事务消息保证一致性等等。



详见：

[[秒杀第二套方案：基于Redis+MQ+数据库实现高并发扣减]]
快手直播间秒杀热点扣减方案：



![[fad5afc4-a7b5-4e60-be80-a1aa3053176a.png]]



这套方案，是快手在抗辛巴直播间福利品抢购的热点方案，可以看到他同时用到了我们的MQ方案，以及我们的hint方案（虽然他没明说他用了hint，但是他这里提到的针对MySQL的深度优化，看上去和hint的方案是一样的）



他这个方案中提到的数据一致性对账，我们其实也是要做的，因为在技术方案设计的时候就考虑了这个问题，所以在Redis中我们也记录了流水，方便我们后期阿里进行数据核对。



详见

[[秒杀第一套方案：基于InventoryHint实现库存的热点扣减]]
