一张是库存流水表，一张是藏品操作流水表。



流水表的作用主要是用于对账、幂等以及后期的数据分析、报表和统计使用。



藏品操作流水（CollectionStream）主要是在后台操作藏品的时候会插入的，如下面的创建、下架和修改价格的地方

![[fdab3b92-05c6-4b88-89ee-52e42fc35c7b.png]]



而藏品的库存流水（CollectionInventoryStream），主要用于藏品在做库存扣减、添加的时候使用。这张表主要用来做数据核对和幂等，尤其是保证 Redis 和数据库的一致性的场景，需要用这个流水做核对的。



主要有以下这些调用入口：

![[cc086864-8609-4a56-9901-19fae5809939.png]]



其实，藏品的库存我们是可以单独记录一张表的，作为库存表，放在一个单独的库存域，但是那么做有点复杂，所以我们就在藏品表上加了库存字段来实现了。但是库存的流水还需要单独有的，和普通的藏品流水区分开，方便对账使用。

