![[b30a4e72-9fc0-4ba0-a667-721d810c52ed.jpeg]]



这是我们的订单的状态机，为什么没有PAYING 状态表示支付中呢？



其实没有任何必要，反而会带来很多问题：



因为订单的支付可能发起多次，因为用户可能会不同的渠道支付，也可能取消支付在发起一次，那么这个状态就需要不断变化，从 CONFIRM 到 PAYING，在回退到 CONFIRM，就很麻烦。



而且，这个 PAYING 也没啥用，如果想知道订单是否在支付中，用订单号去支付单表查询是否有在途的支付单就行了，在订单上冗余这个状态没必要，而且还要想办法保证一致性，即如果支付单超时了，那么订单状态也好的跟着修改，太麻烦。



而 CONFIRM 之后，直接到PAID，表示订单支付成功即可，这才是一个明确的状态，中间的支付中状态没有带来什么额外的好处，也没有解决什么实际的问题，反而带来了缺点。

