在我们的项目中，我们需要定义一些全局唯一的 ID，比如订单号，支付单号等等。这些ID有以下几个基本要求：

1、不能重复

2、不可被预测

3、能适应分库分表



为了生成一个这样的全局的订单号，我自定义了一个分布式ID生成器，其中包含了三部分内容，分别是系统标识码，表下标以及序列化。



其中系统标识码用于区分具体是什么业务（如交易订单，库存，积分等），表下标为了兼容分库分表的场景，序列号采用雪花算法生成。最终生成的订单号形如：10（业务码）1769649671860822016（sequence）1023（分表）



业务码用来区分具体的业务，如交易订单，支付单等，然后雪花算法用来保证唯一性，分表信息用来实现分表后的订单号查询。具体参考：

[[定义多Key分片算法]]

[[基于基因法实现可基于订单号路由到单表]]

