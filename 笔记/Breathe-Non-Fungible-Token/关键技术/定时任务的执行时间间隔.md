我们的项目中有很多定时任务，那么他们的调度方式和时间间隔都如何配置的？



首先，定时任务的时间间隔，一般都是基于业务要求来配置的，因为定时任务意味着要定时执行，但是他就是会存在延时，所以要看业务能接收的最长的延迟是多少，不能比这个时间更长，而且随着业务量不一样，时间间隔也能有所调整。



## 订单模块
orderConfirmExecute，用于推进订单状态从create到confirm，首先是失败概率比较低，并且对实时性要求比较高，所以设置5-10s执行一次。

![[5ffe43e4-8ffe-48cb-bb12-0f0ba9c0d9a6.png]]

![[d0b65034-eb98-44af-afd7-57470be85e72.png]]

orderTimeOutExecute，订单超时关单任务，推进订单状态到关单状态，因为我们有主动关单，支付环节也有检查，所以这里不需要太频繁，可以设置5-10分钟执行一次即可。

![[cb665f5c-beba-4da1-bc08-7ff3c4055384.png]]

![[eafdc6c0-3305-47a4-8cff-2885024a873e.png]]

## 通知模块
noticeSendRetryJob，用于消息通知的重试，设置一分钟执行一次即可。其实大部分都是空跑，所以影响也不大。

![[763307f6-8989-42a0-bc56-fa708c6e7fb2.png]]

## 区块链模块
unFinishOperateExecute，用于调外部链平台操作失败重试，设置5分钟执行一次即可。

![[1a4305bf-62bf-46a7-a1b0-fd813e677609.png]]



## 支付模块
payTimeOutExecute，支付单超时关单任务，这个因为外部的支付渠道他们自己也会又超时机制，有的还会有超时消息给过来，所以这里的时间不需要太频繁，设置个10分钟都行，或者设置半小时都可以。

