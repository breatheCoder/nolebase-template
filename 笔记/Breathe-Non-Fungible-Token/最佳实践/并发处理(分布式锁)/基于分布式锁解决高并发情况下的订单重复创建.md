```java
@Override  
@DistributeLock(keyExpression = "#request.identifier", scene = "ORDER_CREATE")  
@Facade  
public OrderResponse create(OrderCreateRequest request) {  
    //通过责任链模式实现参数的校验  
    try {  
        orderValidatorChain.validate(request);  
    } catch (OrderException e) {  
        return new OrderResponse.OrderResponseBuilder().buildFail(ORDER_CREATE_VALID_FAILED.getCode(), e.getErrorCode().getMessage());  
    }  
    //构建库存扣减请求，去扣减库存。  
    InventoryRequest inventoryRequest = new InventoryRequest(request);  
    SingleResponse<Boolean> decreaseResult = inventoryFacadeService.decrease(inventoryRequest);  
    //如果扣减成功的话，就创建订单并且异步confirm  
    if (decreaseResult.getSuccess()) {  
        return orderService.createAndAsyncConfirm(request);  
    }  
    throw new OrderException(OrderErrorCode.INVENTORY_DECREASE_FAILED);  
}
```

以上，是我们的OrderFacadeServiceImpl中的创建订单的实现方法，大家注意下这里用了一个@DistributeLock，这其实是我们的分布式锁的组件。

[[通用分布式锁注解实现]]

这里是针对用户传进来的 identifier 做锁，防止请求重复，消息重放等等场景导致的订单重复创建。