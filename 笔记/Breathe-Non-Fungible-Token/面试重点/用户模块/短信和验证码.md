![[479b4b19-ec8b-40be-ade0-e4c8aabdf050.png]]



调用Hutool的RandomUtil方法来生成的



![[ba1ebe2d-53be-43d2-b637-c9b74acdef76.png]]



保存到redis中，redis中的key就是模块名（captcha）然后分隔符拼接手机号，value就是验证码，到时候通过手机号从redis中获取到验证码来和用户传递过来的验证码做一个比较，看看是否相等，相等的话继续注册，然后生成用户，存到数据库中，不相等的话就抛出异常



删除验证码和查询验证码的一个原子性是如何做到的，可以有两种方式，如果你redis版本较高的话，6.0以上我记得，就可以使用getdel这个命令来删除这个key，如果版本低的话，可以选择执行lua脚本来实现。



过期时间是存的时候设置了一个4分钟的事件



由于短信发送是需要钱的，虽然前端有内种将按钮置灰的校验，所以为了防止说有人恶意拿着咱们的接口调用，然后浪费咱们很多的money，我们后端也是做了一层校验，就是利用滑动窗口来限流



## 既然有了滑动窗口，为什么还要有分布式锁呢？


## 用户名不能唯一吗，如何生成的，为什么要这么生成


## 布隆过滤器的原理，布谷鸟过滤器的原理x
