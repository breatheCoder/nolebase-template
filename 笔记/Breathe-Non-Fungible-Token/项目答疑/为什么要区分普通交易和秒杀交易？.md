因为场景不一样, 方案也就不一样.

秒杀交易是典型的高并发场景, 普通交易则没有那么大的并发, 所以他们的技术方案一定是不同的.

如果是秒杀场景的话, 一个特别关键要保证的点就是不能相互影响, 不能因为做一个秒杀活动, 导致普通商品无法下单了. 同理, 普通商品下单服务有问题也不应该导致秒杀服务不可用, 所以需要做好隔离.

所以我们需要区分不同的交易类型, 来做不同的技术方案, 如何识别那些商品走普通交易, 哪些商品走秒杀方案呢?

其实, 一种是通过频道或者活动报名, 比如双十一活动报名, 或者聚划算默认秒杀.

还有一种是做热点检测, 发现达到一定的热度后, 晋升为秒杀商品, 走秒杀链路.

热点检测的方案有很多, 我们用的比较简单, 那就是针对藏品做预约, 达到一定人数了, 就让他们走秒杀链路

还有一个可以参考京东开源的hotkey框架也可以.